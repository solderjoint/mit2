# mbus variables table
Везде используются int16/int32, даже вместо переменных с плавающей точкой. Таким образом достигается точность фиксированной точки. Где не хватает 10^-3 (1/1000) точности, применяется int32 и 10^-9 (1/1'000'000'000), если иначе не указано. Запись (макс=29.999) означает что данный регистр принимает значения до 29'999, запакованные в формат int16, внутренне переводимые в формат с плавающей точкой с точностью 10^-3. Запись и чтение "длинных" регистров размером 32 бита производится в следующем порядке: var32 = (&30001 << 16) + (&30002), если иначе не указано.

## read only registers
|Position|		Variable		|		Description			|
|:------:|:-----------------:|:--------------------------:|
| 30000  |		---			| read only registers offset					|
| 30001  | Line Voltage DC1	| Постоянное напряжение линии (верхние 16 бит)|
| 30002  | Line Voltage DC0	| с точностью 10^-6 (нижние 16 бит)			|
| 30003  | Line Voltage AC1	| Постоянное напряжение линии (верхние 16 бит)|
| 30004  | Line Voltage AC0	| с точностью 10^-6 (нижние 16 бит)			|
| 30011  | Mutex Register	| Текущее состояние переменной семафора		|
| 30012  | Stream Register	| Текущее состояние переменной потока/буффера|
| 30408  |Fourier Buffer Size	|Количество точек в буффере Фурье (норма=1024)|
| 30409  |Fourier Resolution	|Разрешение частоты на точку 1 (макс=65.535)	|
| 31000  | Found Buffer Size	|Общее количество найденных датчиков (макс=32)|
| 31001  | Found Buffer Num1	|Буффер найденных номеров датчиков (1й номер)	|
| 31002  | Found Buffer Num2	|Буффер найденных номеров датчиков (2й номер)	|
| 31003  | Found Buffer Num3	|Буффер найденных номеров датчиков (3й номер)	|
|  ... 	| 		...			| 				...							|
| 31030  | Found Buffer Num30	|Буффер найденных номеров датчиков (30й номер)|
| 31031  | Found Buffer Num31	|Буффер найденных номеров датчиков (31й номер)|
| 31032  | Found Buffer Num32	|Буффер найденных номеров датчиков (32й номер)|

## read/write registers
|Position|		Variable		|		Description			|
|:------:|:-----------------:|:--------------------------:|
| 40000  |		---			| read/write registers offset					|
| 40001  |	Line Status		| Главное состояние линии (ошибка != 0)		|
| 40002  |	Relay Status		| Положение реле (-1/0/1  ошибка/выкл/вкл)	|
| 40006  | 	CAN Device ID	| Идентификационный номер в линии КАН			|
| 40008  | Current UnixTime1	| Текущее время (с момента включения)			|
| 40009  | Current UnixTime0	|		(нижние 16 бит) (в секундах)			|
| 40100  | Periph. LED State	| Состояние светодиодов (101=ВКЛ/ВЫКЛ/ВКЛ)	|
| 40101  | Periph. CAN Rate1	| Скорость КАН бод/сек (верхние 16 бит)		|
| 40102  | Periph. CAN Rate0	| Скорость КАН бод/сек (нижние 16 бит)		|
| 40103  | Periph. SPI Rate1	| Скорость СПИ бод/сек (верхние 16 бит)		|
| 40104  | Periph. SPI Rate0	| Скорость СПИ бод/сек (нижние 16 бит)		|
| 40105  | Periph. UART Rate1	| Скорость УАРТ бод/сек (верхние 16 бит)		|
| 40106  | Periph. UART Rate0	| Скорость УАРТ бод/сек (нижние 16 бит)		|
| 40200  | Period Frequency	| Частота семафора главного цикла	 (мс) |
| 40201  | Period Line Check	| Частота проверки линии (N/[Period Frequency])|
| 40202  | Period Volt Update	| Частота обновления "нормального" напряжения	|
| 40203  | Period Comm Check	| Частота проверки коммуникаций (неиспольз.)	|
| 40300  | Voltage AC Mult1	|Подстроечный множитель переменного напряжения|
| 40301  | Voltage AC Mult0	|[макс=0'999'999'999 = 0.9999..] нижние 16 бит|
| 40302  | Voltage DC Mult1	|Подстроечный множитель постоянного напряжения|
| 40303  | Voltage DC Mult0	|[макс=0'999'999'999 = 0.9999..] нижние 16 бит|
| 40304  | Voltage Spike		| Аварийный пик AC напряжения (макс=9.999) 	|
| 40305  | Voltage Normal	| Нормальное DC напряжение линии (макс=9.999)	|
| 40306  | Voltage LineBreach	| DC напряжение обрыва линии (макс=29.999)	|
| 40307  | Voltage LineShort	| DC напряжение замыкания линии (макс=29.999)	|
| 40400  |Fourier Oversamples| Количество передискретизаций Фурье (макс=16)|
| 40401  |Fourier Sample Rate| Частота дискретизации Фурье (макс=65535)	|
| 40402  |Fourier Volt Mult1	| Подстроечный множитель напряжения для Фурье	|
| 40403  |Fourier Volt Mult0	|[макс=0'999'999'999 = 0.9999..] нижние 16 бит|
| 40405  | Fourier Freq. Min	|Минимальная частота поиска Фурье (макс=9999)	|
| 40406  | Fourier Freq. Max	|Максимальная частота поиска Фурье (макс=65535)|
| 40407  | Fourier Freq. Ref	| 	Частота оконечного устройства в линии 	|
| 41000  | Search Buffer Size	| Размер буффера искомых частот (норм=32)		|
| 41001  |Search Buffer Freq1	| Буффер искомых частот датчиков (1я частота) |
| 41002  |Search Buffer Freq2	| Буффер искомых частот датчиков (2я частота) |
| 41003  |Search Buffer Freq3	| Буффер искомых частот датчиков (3я частота) |
|  ...  | 		...			| 				...							|
|41030 |Search Buffer Freq30	| Буффер искомых частот датчиков (30я частота)|
|41031 |Search Buffer Freq31	| Буффер искомых частот датчиков (31я частота)|
|41032 |Search Buffer Freq32	| Буффер искомых частот датчиков (32я частота)|
